"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/products";
exports.ids = ["pages/api/products"];
exports.modules = {

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "puppeteer":
/*!****************************!*\
  !*** external "puppeteer" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("puppeteer");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fproducts&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fproducts.js&middlewareConfigBase64=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fproducts&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fproducts.js&middlewareConfigBase64=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_products_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/products.js */ \"(api)/./pages/api/products.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_products_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_products_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/products\",\n        pathname: \"/api/products\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_products_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnByb2R1Y3RzJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGcGFnZXMlMkZhcGklMkZwcm9kdWN0cy5qcyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDTDtBQUMxRDtBQUNvRDtBQUNwRDtBQUNBLGlFQUFlLHdFQUFLLENBQUMsbURBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLG1EQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLGdIQUFtQjtBQUNsRDtBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCIsInNvdXJjZXMiOlsid2VicGFjazovL2RyYXBlcnktY2xvbmUvPzcwMDEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzL2FwaS9wcm9kdWN0cy5qc1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3Byb2R1Y3RzXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvcHJvZHVjdHNcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fproducts&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fproducts.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/products.js":
/*!*******************************!*\
  !*** ./pages/api/products.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var puppeteer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! puppeteer */ \"puppeteer\");\n/* harmony import */ var puppeteer__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(puppeteer__WEBPACK_IMPORTED_MODULE_0__);\n// pages/api/products.js\n\nconst SHOP_URL = \"https://drapery.co.kr/shop\";\nasync function handler(req, res) {\n    let browser;\n    try {\n        browser = await puppeteer__WEBPACK_IMPORTED_MODULE_0___default().launch({\n            headless: \"new\",\n            args: [\n                \"--no-sandbox\",\n                \"--disable-setuid-sandbox\"\n            ]\n        });\n        const page = await browser.newPage();\n        await page.goto(SHOP_URL, {\n            waitUntil: \"networkidle2\",\n            timeout: 60000\n        });\n        // 상품 카드가 로드될 때까지 대기\n        await page.waitForSelector(\".shopProductWrapper\", {\n            timeout: 30000\n        });\n        const products = await page.evaluate(()=>{\n            const cards = Array.from(document.querySelectorAll(\".shopProductWrapper\"));\n            const list = [];\n            for (const card of cards){\n                // ───────── ID / URL ─────────\n                const linkEl = card.querySelector('a[href^=\"/product/\"]');\n                if (!linkEl) continue;\n                const href = linkEl.getAttribute(\"href\") || \"\";\n                if (!href) continue;\n                const key = href.split(\"?\")[0]; // /product/xxxx\n                const id = key.replace(\"/product/\", \"\");\n                // ───────── NAME ─────────\n                const nameEl = card.querySelector(\".shopProduct.productName\");\n                const name = nameEl ? nameEl.textContent.trim() : \"\";\n                // ───────── PRICE ─────────\n                // 할인된 가격이 있으면 그걸 우선 사용, 없으면 원가만 있는 구조\n                const discountEl = card.querySelector(\".productDiscountPriceSpan\");\n                const priceEl = discountEl || card.querySelector(\".productPriceSpan\");\n                const originalEl = discountEl && card.querySelector(\".productPriceWithDiscountSpan\");\n                const parsePrice = (el)=>{\n                    if (!el) return null;\n                    const txt = el.textContent.replace(/[^\\d]/g, \"\");\n                    if (!txt) return null;\n                    return parseInt(txt, 10);\n                };\n                const price = parsePrice(priceEl);\n                const originalPrice = parsePrice(originalEl);\n                // ───────── IMAGE ─────────\n                let imageUrl = \"\";\n                const thumbDiv = card.querySelector(\".thumb.img\") || card.querySelector(\".thumbDiv .thumb\");\n                if (thumbDiv) {\n                    // 1순위: imgsrc 속성\n                    imageUrl = thumbDiv.getAttribute(\"imgsrc\") || thumbDiv.getAttribute(\"data-src\") || thumbDiv.getAttribute(\"data-original\") || \"\";\n                    // 2순위: background-image 스타일\n                    if (!imageUrl) {\n                        let bg = thumbDiv.style.backgroundImage;\n                        if (!bg) {\n                            bg = window.getComputedStyle(thumbDiv).backgroundImage;\n                        }\n                        if (bg && bg.startsWith(\"url\")) {\n                            const m = bg.match(/url\\([\"']?(.*?)[\"']?\\)/);\n                            if (m && m[1]) {\n                                imageUrl = m[1];\n                            }\n                        }\n                    }\n                }\n                // 상대 경로 → 절대 경로\n                if (imageUrl.startsWith(\"//\")) {\n                    imageUrl = \"https:\" + imageUrl;\n                } else if (imageUrl.startsWith(\"/\")) {\n                    imageUrl = \"https://contents.sixshop.com\" + imageUrl;\n                }\n                // ───────── SOLD OUT ─────────\n                const soldOutBadge = card.querySelector(\".soldOutBadge span\");\n                const soldOut = !!soldOutBadge && /sold out/i.test(soldOutBadge.textContent || \"\");\n                list.push({\n                    id,\n                    name,\n                    price,\n                    originalPrice,\n                    image: imageUrl || null,\n                    url: new URL(href, window.location.origin).href,\n                    soldOut\n                });\n            }\n            return list;\n        });\n        res.status(200).json({\n            products\n        });\n    } catch (err) {\n        console.error(err);\n        res.status(500).json({\n            message: \"Failed to fetch products\"\n        });\n    } finally{\n        if (browser) {\n            await browser.close();\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFPO29CQUM3QlAsV0FBVyxXQUFXQTtnQkFDeEIsT0FBTyxJQUFJQSxTQUFTTyxVQUFVLENBQUMsTUFBTTtvQkFDbkNQLFdBQVcsaUNBQWlDQTtnQkFDOUM7Z0JBRUEsK0JBQStCO2dCQUMvQixNQUFNVSxlQUFlaEMsS0FBS0UsYUFBYSxDQUFDO2dCQUN4QyxNQUFNK0IsVUFDSixDQUFDLENBQUNELGdCQUNGLFlBQVlFLElBQUksQ0FBQ0YsYUFBYXJCLFdBQVcsSUFBSTtnQkFFL0NaLEtBQUtvQyxJQUFJLENBQUM7b0JBQ1I1QjtvQkFDQUc7b0JBQ0FVO29CQUNBQztvQkFDQWUsT0FBT2QsWUFBWTtvQkFDbkJlLEtBQUssSUFBSUMsSUFBSW5DLE1BQU13QixPQUFPWSxRQUFRLENBQUNDLE1BQU0sRUFBRXJDLElBQUk7b0JBQy9DOEI7Z0JBQ0Y7WUFDRjtZQUVBLE9BQU9sQztRQUNUO1FBRUFsQixJQUFJNEQsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFbEQ7UUFBUztJQUNsQyxFQUFFLE9BQU9tRCxLQUFLO1FBQ1pDLFFBQVFDLEtBQUssQ0FBQ0Y7UUFDZDlELElBQUk0RCxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVJLFNBQVM7UUFBMkI7SUFDN0QsU0FBVTtRQUNSLElBQUloRSxTQUFTO1lBQ1gsTUFBTUEsUUFBUWlFLEtBQUs7UUFDckI7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhcGVyeS1jbG9uZS8uL3BhZ2VzL2FwaS9wcm9kdWN0cy5qcz80OWNiIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHBhZ2VzL2FwaS9wcm9kdWN0cy5qc1xuaW1wb3J0IHB1cHBldGVlciBmcm9tIFwicHVwcGV0ZWVyXCI7XG5cbmNvbnN0IFNIT1BfVVJMID0gXCJodHRwczovL2RyYXBlcnkuY28ua3Ivc2hvcFwiO1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzKSB7XG4gIGxldCBicm93c2VyO1xuXG4gIHRyeSB7XG4gICAgYnJvd3NlciA9IGF3YWl0IHB1cHBldGVlci5sYXVuY2goe1xuICAgICAgaGVhZGxlc3M6IFwibmV3XCIsXG4gICAgICBhcmdzOiBbXCItLW5vLXNhbmRib3hcIiwgXCItLWRpc2FibGUtc2V0dWlkLXNhbmRib3hcIl0sXG4gICAgfSk7XG5cbiAgICBjb25zdCBwYWdlID0gYXdhaXQgYnJvd3Nlci5uZXdQYWdlKCk7XG5cbiAgICBhd2FpdCBwYWdlLmdvdG8oU0hPUF9VUkwsIHtcbiAgICAgIHdhaXRVbnRpbDogXCJuZXR3b3JraWRsZTJcIixcbiAgICAgIHRpbWVvdXQ6IDYwXzAwMCxcbiAgICB9KTtcblxuICAgIC8vIOyDge2SiCDsubTrk5zqsIAg66Gc65Oc65CgIOuVjOq5jOyngCDrjIDquLBcbiAgICBhd2FpdCBwYWdlLndhaXRGb3JTZWxlY3RvcihcIi5zaG9wUHJvZHVjdFdyYXBwZXJcIiwgeyB0aW1lb3V0OiAzMF8wMDAgfSk7XG5cbiAgICBjb25zdCBwcm9kdWN0cyA9IGF3YWl0IHBhZ2UuZXZhbHVhdGUoKCkgPT4ge1xuICAgICAgY29uc3QgY2FyZHMgPSBBcnJheS5mcm9tKFxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNob3BQcm9kdWN0V3JhcHBlclwiKVxuICAgICAgKTtcblxuICAgICAgY29uc3QgbGlzdCA9IFtdO1xuXG4gICAgICBmb3IgKGNvbnN0IGNhcmQgb2YgY2FyZHMpIHtcbiAgICAgICAgLy8g4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAIElEIC8gVVJMIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuICAgICAgICBjb25zdCBsaW5rRWwgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoJ2FbaHJlZl49XCIvcHJvZHVjdC9cIl0nKTtcbiAgICAgICAgaWYgKCFsaW5rRWwpIGNvbnRpbnVlO1xuXG4gICAgICAgIGNvbnN0IGhyZWYgPSBsaW5rRWwuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKSB8fCBcIlwiO1xuICAgICAgICBpZiAoIWhyZWYpIGNvbnRpbnVlO1xuXG4gICAgICAgIGNvbnN0IGtleSA9IGhyZWYuc3BsaXQoXCI/XCIpWzBdOyAvLyAvcHJvZHVjdC94eHh4XG4gICAgICAgIGNvbnN0IGlkID0ga2V5LnJlcGxhY2UoXCIvcHJvZHVjdC9cIiwgXCJcIik7XG5cbiAgICAgICAgLy8g4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAIE5BTUUg4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG4gICAgICAgIGNvbnN0IG5hbWVFbCA9IGNhcmQucXVlcnlTZWxlY3RvcihcIi5zaG9wUHJvZHVjdC5wcm9kdWN0TmFtZVwiKTtcbiAgICAgICAgY29uc3QgbmFtZSA9IG5hbWVFbFxuICAgICAgICAgID8gbmFtZUVsLnRleHRDb250ZW50LnRyaW0oKVxuICAgICAgICAgIDogXCJcIjtcblxuICAgICAgICAvLyDilIDilIDilIDilIDilIDilIDilIDilIDilIAgUFJJQ0Ug4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG4gICAgICAgIC8vIO2VoOyduOuQnCDqsIDqsqnsnbQg7J6I7Jy866m0IOq3uOqxuCDsmrDshKAg7IKs7JqpLCDsl4bsnLzrqbQg7JuQ6rCA66eMIOyeiOuKlCDqtazsobBcbiAgICAgICAgY29uc3QgZGlzY291bnRFbCA9IGNhcmQucXVlcnlTZWxlY3RvcihcIi5wcm9kdWN0RGlzY291bnRQcmljZVNwYW5cIik7XG4gICAgICAgIGNvbnN0IHByaWNlRWwgPVxuICAgICAgICAgIGRpc2NvdW50RWwgfHwgY2FyZC5xdWVyeVNlbGVjdG9yKFwiLnByb2R1Y3RQcmljZVNwYW5cIik7XG5cbiAgICAgICAgY29uc3Qgb3JpZ2luYWxFbCA9XG4gICAgICAgICAgZGlzY291bnRFbCAmJiBjYXJkLnF1ZXJ5U2VsZWN0b3IoXCIucHJvZHVjdFByaWNlV2l0aERpc2NvdW50U3BhblwiKTtcblxuICAgICAgICBjb25zdCBwYXJzZVByaWNlID0gKGVsKSA9PiB7XG4gICAgICAgICAgaWYgKCFlbCkgcmV0dXJuIG51bGw7XG4gICAgICAgICAgY29uc3QgdHh0ID0gZWwudGV4dENvbnRlbnQucmVwbGFjZSgvW15cXGRdL2csIFwiXCIpO1xuICAgICAgICAgIGlmICghdHh0KSByZXR1cm4gbnVsbDtcbiAgICAgICAgICByZXR1cm4gcGFyc2VJbnQodHh0LCAxMCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgcHJpY2UgPSBwYXJzZVByaWNlKHByaWNlRWwpO1xuICAgICAgICBjb25zdCBvcmlnaW5hbFByaWNlID0gcGFyc2VQcmljZShvcmlnaW5hbEVsKTtcblxuICAgICAgICAvLyDilIDilIDilIDilIDilIDilIDilIDilIDilIAgSU1BR0Ug4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAXG4gICAgICAgIGxldCBpbWFnZVVybCA9IFwiXCI7XG5cbiAgICAgICAgY29uc3QgdGh1bWJEaXYgPVxuICAgICAgICAgIGNhcmQucXVlcnlTZWxlY3RvcihcIi50aHVtYi5pbWdcIikgfHxcbiAgICAgICAgICBjYXJkLnF1ZXJ5U2VsZWN0b3IoXCIudGh1bWJEaXYgLnRodW1iXCIpO1xuXG4gICAgICAgIGlmICh0aHVtYkRpdikge1xuICAgICAgICAgIC8vIDHsiJzsnIQ6IGltZ3NyYyDsho3shLFcbiAgICAgICAgICBpbWFnZVVybCA9XG4gICAgICAgICAgICB0aHVtYkRpdi5nZXRBdHRyaWJ1dGUoXCJpbWdzcmNcIikgfHxcbiAgICAgICAgICAgIHRodW1iRGl2LmdldEF0dHJpYnV0ZShcImRhdGEtc3JjXCIpIHx8XG4gICAgICAgICAgICB0aHVtYkRpdi5nZXRBdHRyaWJ1dGUoXCJkYXRhLW9yaWdpbmFsXCIpIHx8XG4gICAgICAgICAgICBcIlwiO1xuXG4gICAgICAgICAgLy8gMuyInOychDogYmFja2dyb3VuZC1pbWFnZSDsiqTtg4DsnbxcbiAgICAgICAgICBpZiAoIWltYWdlVXJsKSB7XG4gICAgICAgICAgICBsZXQgYmcgPSB0aHVtYkRpdi5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2U7XG4gICAgICAgICAgICBpZiAoIWJnKSB7XG4gICAgICAgICAgICAgIGJnID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUodGh1bWJEaXYpLmJhY2tncm91bmRJbWFnZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChiZyAmJiBiZy5zdGFydHNXaXRoKFwidXJsXCIpKSB7XG4gICAgICAgICAgICAgIGNvbnN0IG0gPSBiZy5tYXRjaCgvdXJsXFwoW1wiJ10/KC4qPylbXCInXT9cXCkvKTtcbiAgICAgICAgICAgICAgaWYgKG0gJiYgbVsxXSkge1xuICAgICAgICAgICAgICAgIGltYWdlVXJsID0gbVsxXTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIOyDgeuMgCDqsr3roZwg4oaSIOygiOuMgCDqsr3roZxcbiAgICAgICAgaWYgKGltYWdlVXJsLnN0YXJ0c1dpdGgoXCIvL1wiKSkge1xuICAgICAgICAgIGltYWdlVXJsID0gXCJodHRwczpcIiArIGltYWdlVXJsO1xuICAgICAgICB9IGVsc2UgaWYgKGltYWdlVXJsLnN0YXJ0c1dpdGgoXCIvXCIpKSB7XG4gICAgICAgICAgaW1hZ2VVcmwgPSBcImh0dHBzOi8vY29udGVudHMuc2l4c2hvcC5jb21cIiArIGltYWdlVXJsO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8g4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSAIFNPTEQgT1VUIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuICAgICAgICBjb25zdCBzb2xkT3V0QmFkZ2UgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuc29sZE91dEJhZGdlIHNwYW5cIik7XG4gICAgICAgIGNvbnN0IHNvbGRPdXQgPVxuICAgICAgICAgICEhc29sZE91dEJhZGdlICYmXG4gICAgICAgICAgL3NvbGQgb3V0L2kudGVzdChzb2xkT3V0QmFkZ2UudGV4dENvbnRlbnQgfHwgXCJcIik7XG5cbiAgICAgICAgbGlzdC5wdXNoKHtcbiAgICAgICAgICBpZCxcbiAgICAgICAgICBuYW1lLFxuICAgICAgICAgIHByaWNlLFxuICAgICAgICAgIG9yaWdpbmFsUHJpY2UsXG4gICAgICAgICAgaW1hZ2U6IGltYWdlVXJsIHx8IG51bGwsXG4gICAgICAgICAgdXJsOiBuZXcgVVJMKGhyZWYsIHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4pLmhyZWYsXG4gICAgICAgICAgc29sZE91dCxcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBsaXN0O1xuICAgIH0pO1xuXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBwcm9kdWN0cyB9KTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogXCJGYWlsZWQgdG8gZmV0Y2ggcHJvZHVjdHNcIiB9KTtcbiAgfSBmaW5hbGx5IHtcbiAgICBpZiAoYnJvd3Nlcikge1xuICAgICAgYXdhaXQgYnJvd3Nlci5jbG9zZSgpO1xuICAgIH1cbiAgfVxufVxuIl0sIm5hbWVzIjpbInB1cHBldGVlciIsIlNIT1BfVVJMIiwiaGFuZGxlciIsInJlcSIsInJlcyIsImJyb3dzZXIiLCJsYXVuY2giLCJoZWFkbGVzcyIsImFyZ3MiLCJwYWdlIiwibmV3UGFnZSIsImdvdG8iLCJ3YWl0VW50aWwiLCJ0aW1lb3V0Iiwid2FpdEZvclNlbGVjdG9yIiwicHJvZHVjdHMiLCJldmFsdWF0ZSIsImNhcmRzIiwiQXJyYXkiLCJmcm9tIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwibGlzdCIsImNhcmQiLCJsaW5rRWwiLCJxdWVyeVNlbGVjdG9yIiwiaHJlZiIsImdldEF0dHJpYnV0ZSIsImtleSIsInNwbGl0IiwiaWQiLCJyZXBsYWNlIiwibmFtZUVsIiwibmFtZSIsInRleHRDb250ZW50IiwidHJpbSIsImRpc2NvdW50RWwiLCJwcmljZUVsIiwib3JpZ2luYWxFbCIsInBhcnNlUHJpY2UiLCJlbCIsInR4dCIsInBhcnNlSW50IiwicHJpY2UiLCJvcmlnaW5hbFByaWNlIiwiaW1hZ2VVcmwiLCJ0aHVtYkRpdiIsImJnIiwic3R5bGUiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJ3aW5kb3ciLCJnZXRDb21wdXRlZFN0eWxlIiwic3RhcnRzV2l0aCIsIm0iLCJtYXRjaCIsInNvbGRPdXRCYWRnZSIsInNvbGRPdXQiLCJ0ZXN0IiwicHVzaCIsImltYWdlIiwidXJsIiwiVVJMIiwibG9jYXRpb24iLCJvcmlnaW4iLCJzdGF0dXMiLCJqc29uIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwibWVzc2FnZSIsImNsb3NlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/products.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fproducts&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fproducts.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();